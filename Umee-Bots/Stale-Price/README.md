# Detect Stale Price Data From Chainlink Aggregator

## Description

This agent monitors price oracle data to see if it has not been updated over a specific threshold.

## Supported Chains

- Ethereum

## Alerts

- UMEE-3
  - Fired when the price of any asset stop been updated in a particular period of time.
       - Triggered when `AssetSourceUpdated` event emitted
       - Check time interval after each block.
  - Severity is always set to "Medium."
  - Type is always set to "Suspicious."
  - Metadata contains:
    - asset: The address of the asset.
    - source: The address of the source.
    - lastTime: The last time asset price changed

## Test Data

### Kovan Testnet (PoC)

The following test was generated by interacting with PoC contracts (available at the `PoC/` directory) deployed on the Kovan testnet.

To check the results, uncomment the lines indicated in `src/agent.config.ts,` set a Kovan testnet RPC (e.g. `https://kovan.poa.network`) as `jsonRpcUrl` in your `forta.config.json` file and run:

```
npm run block 31914255
```

In the block `31914255`, `MockUmeeOracle,` PoC has a `reserveList` query with one `source` address. This `source` latest time was `Thu Jan 01, 1970` so bot emits finding for the staling price.
